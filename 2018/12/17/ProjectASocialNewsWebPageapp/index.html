<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/images/favicon-16x16.ico">
    

    
    
        <link rel="stylesheet" href="/css/mdui.min.v1.0.0.css">
    
    <link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/iconfont.css">

    
    












          


    
    
    <title>
        
            ProjectASocialNewsWebPageapp | Drowning me
        
    </title>
    
    
</head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/" class="mdui-typo-headline">Drowning me</a>
    <a href="/" class="header-subtitle mdui-typo-headline">沉没</a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-2">
        <div class="mdui-list">
            
                
                <a href="/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">主页</div>
                </a>
            
                
                <a href="/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/categories/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-folder"></i>
                    </div>
                    <div class="mdui-list-item-content">分类</div>
                </a>
            
                
                <a href="/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
                
                <a href="/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-2">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/images/avatar.jpg"/>
                
            </div>
            <div class="sidebar-author-name">Sirine</div>
            <div class="sidebar-description"></div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="mailto:sirine@foxmail.com" target="_blank" rel="noopener" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a href="https://github.com/S1rine" target="_blank" rel="noopener" class="mdui-chip-title">GitHub</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a href="https://garybear.cn/hexo-theme-meadow/" target="_blank" rel="noopener" class="mdui-list-item mdui-ripple">
                            Meadow说明文档
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/2018/12/17/ProjectASocialNewsWebPageapp/">ProjectASocialNewsWebPageapp</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2018-12-17
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2018-12-17
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;<a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </span>
    
      <span>
        <span class="iconfont icon-eye"></span>
        阅读次数:&nbsp;
        <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
      </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=ProjectASocialNewsWebPageapp&url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/&pic=https://s1rine.github.io/images/favicon-16x16.ico&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=ProjectASocialNewsWebPageapp&url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/&via=Sirine" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/&title=ProjectASocialNewsWebPageapp" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=Drowning me&title=ProjectASocialNewsWebPageapp&summary=&pics=https://s1rine.github.io/images/favicon-16x16.ico&url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=https://s1rine.github.io/2018/12/17/ProjectASocialNewsWebPageapp/&text=ProjectASocialNewsWebPageapp" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/notes/ >notes</a>
      </i>
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/js/ >js</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <p>2018.12.17 11:07 <strong>ES6学习中</strong></p>
<blockquote>
<p>Thejsway/chapter26 <code>&lt;Project: a social news web app&gt;</code></p>
</blockquote>
<p>原题:</p>
<h1 id="Project-a-social-news-web-app"><a href="#Project-a-social-news-web-app" class="headerlink" title="Project: a social news web app"></a>Project: a social news web app</h1><p>This final project is the culmination of the book. You can check out the <a href="https://thejsway-publink.herokuapp.com" target="_blank" rel="noopener">expected result</a>. Good luck!</p>
<a id="more"></a>

<h2 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h2><p>This project builds upon the social news program and web pages you created previously. This time, the objective is to make a social news application based on a Node.js server.</p>
<h2 id="Functional-requirements"><a href="#Functional-requirements" class="headerlink" title="Functional requirements"></a>Functional requirements</h2><ul>
<li>A link is defined by its title, its URL and its author (submitter).</li>
<li>If a new link URL does not start with “http://“ or “https://“, “http://“ is automatically added at its beginning.</li>
<li>The web app displays a list of at least three already existing links, fetched from the server through an AJAX request.</li>
<li>A button exists for the user to submit a new link. When clicked, a form appears before the link list to input the new link properties (author, title and URL).</li>
<li>In this form, all link fields are mandatory.</li>
<li>When the new link is validated by the user, it is sent as form data to the server. If the operation is successful, the server returns the new link as JSON data. The new link is added at the top of the link list, replacing the form. A message indicates the success of the operation, then disappears after two seconds.</li>
</ul>
<h2 id="Technical-requirements"><a href="#Technical-requirements" class="headerlink" title="Technical requirements"></a>Technical requirements</h2><ul>
<li>The server must use a user-defined module exporting link-related code.</li>
<li>You should reuse any useful code from the previous projects.</li>
<li>All your code should be correctly indented.</li>
<li>Names should be wisely chosen and adhere to the camelCase convention.</li>
<li>Code duplication should be avoided.</li>
</ul>
<h2 id="Expected-result"><a href="#Expected-result" class="headerlink" title="Expected result"></a>Expected result</h2><p>Here are a few screenshots of the expected result.</p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013192921261.png" alt="image-20201013192921261"></p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013192927246.png" alt="image-20201013192927246"></p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013192932469.png" alt="image-20201013192932469"></p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013192937932.png" alt="image-20201013192937932"></p>
<p>=。=决定认真的写一下过程</p>
<h3 id="1-将页面更改为服务端。"><a href="#1-将页面更改为服务端。" class="headerlink" title="1.将页面更改为服务端。"></a>1.将页面更改为服务端。</h3><p>将 <code>fitst.html</code> <code>eample.js</code> <code>first.css</code> 以及部分需求的 <code>js</code> 或者 <code>css</code> 文件复制到 <code>myserver</code>  文件夹中。</p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013193413251.png" alt="image-20201013193413251"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/first'</span>, (request, response) =&gt; &#123;</span><br><span class="line">  response.sendFile(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views/first.html`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>添加一个 <code>app.get</code> 来使 <code>localhost:3000/first</code> 展示为 <code>first.html</code> 。</p>
<p>百般尝试发现无法实现初始化三个链接，一番操作后发现自己打开了另一个路径的 <code>example.js</code>（???修改后发现传入函数 <code>createmenu(link)</code> 的 <code>link</code> 为 <code>undefined</code> 并且只出现了一个链接框(??? 控制台输出大法后发现传入的 <code>link</code> 为 <code>Array(3)</code> (??? 说好的 <code>JSON</code> 呢???)于是循环遍历后，便达成了效果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">'http://localhost:3000/api/first'</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> one <span class="keyword">of</span> result) &#123;</span><br><span class="line">      createmenu(one);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err.message);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/api/first'</span>, jsonParser, (request, response) =&gt; &#123;</span><br><span class="line">  response.json(links);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/first'</span>, (request, response) =&gt; &#123;</span><br><span class="line">  response.sendFile(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/views/first.html`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013193423479.png" alt="image-20201013193423479"></p>
<p>爱心为啥变成了问号，我也母鸡。</p>
<p>又在 <code>JSON</code> 的类型上纠结了很久。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">linkform.addEventListener(<span class="string">'submit'</span>, e =&gt; &#123;</span><br><span class="line">  e.preventDefault();</span><br><span class="line">  <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData(e.target);</span><br><span class="line">  fetch(<span class="string">'http://localhost:3000/api/first'</span>, &#123;</span><br><span class="line">    method: <span class="string">'POST'</span>,</span><br><span class="line">    body: formData</span><br><span class="line">  &#125;)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> response.text())</span><br><span class="line">    .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">      createsucceed(result);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err.message);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.post(<span class="string">'/ai/first'</span>, upload.array(), (request, response) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!(request.body.input.startsWith(<span class="string">'http://'</span>) || request.body.input.startsWith(<span class="string">'https://'</span>))) &#123;</span><br><span class="line">    request.body.input = <span class="string">'http://'</span> + request.body.input;</span><br><span class="line">  &#125;</span><br><span class="line">  response.send(<span class="built_in">JSON</span>.stringify(request.body));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>题目要求为作为表单数据发送给服务器，而服务器以 <code>JSON</code> 数据的形式返回新链接。<br>经过数次尝试后发现在服务器以 <code>JSON.stringify</code> 方法的返回类型返回的话, 再转换为 <code>text</code> 即可达成效果。(但是成功时的提示消息的样式信息怎么给我搞丢了….)</p>
<p><img src="/2018/12/17/ProjectASocialNewsWebPageapp/image-20201013193431327.png" alt="image-20201013193431327"></p>
<p>新的数据怎么又成 <code>undefined</code> 的了。<br>路径的 <code>api</code> 少了一个 <code>p</code> 真好。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createlink = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> linkform = <span class="built_in">document</span>.createElement(<span class="string">'form'</span>);</span><br><span class="line">  linkform.className = <span class="string">'linkForm'</span>;</span><br><span class="line">  <span class="keyword">const</span> input1 = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">  <span class="keyword">const</span> input2 = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">  <span class="keyword">const</span> input3 = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">  <span class="keyword">const</span> input4 = <span class="built_in">document</span>.createElement(<span class="string">'input'</span>);</span><br><span class="line">  input1.style.width = <span class="string">'250px'</span>;</span><br><span class="line">  input2.style.width = <span class="string">'450px'</span>;</span><br><span class="line">  input3.style.width = <span class="string">'300px'</span>;</span><br><span class="line">  input4.style.width = <span class="string">'100px'</span>;</span><br><span class="line">  input1.type = <span class="string">'text'</span>;</span><br><span class="line">  input1.name = <span class="string">'title'</span>;</span><br><span class="line">  input2.type = <span class="string">'text'</span>;</span><br><span class="line">  input2.name = <span class="string">'url'</span>;</span><br><span class="line">  input3.type = <span class="string">'text'</span>;</span><br><span class="line">  input3.name = <span class="string">'submitted'</span>;</span><br><span class="line">  input4.type = <span class="string">'submit'</span>;</span><br><span class="line">  input1.required = <span class="string">'required'</span>;</span><br><span class="line">  input2.required = <span class="string">'required'</span>;</span><br><span class="line">  input3.required = <span class="string">'required'</span>;</span><br><span class="line">  input4.id = <span class="string">'inputbutton'</span>;</span><br><span class="line">  input4.value = <span class="string">'Add link'</span>;</span><br><span class="line">  linkform.addEventListener(<span class="string">'submit'</span>, e =&gt; &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData(e.target);</span><br><span class="line">    fetch(<span class="string">'http://localhost:3000/api/first'</span>, &#123;</span><br><span class="line">      method: <span class="string">'POST'</span>,</span><br><span class="line">      body: formData</span><br><span class="line">    &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">      .then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result);</span><br><span class="line">        createsucceed(result);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err.message);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  linkform.appendChild(input1);</span><br><span class="line">  linkform.appendChild(input2);</span><br><span class="line">  linkform.appendChild(input3);</span><br><span class="line">  linkform.appendChild(input4);</span><br><span class="line">  <span class="built_in">document</span></span><br><span class="line">    .getElementById(<span class="string">'content'</span>)</span><br><span class="line">    .insertBefore(linkform, <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>).childNodes[<span class="number">0</span>]);</span><br><span class="line">&#125;;</span><br><span class="line">app.post(<span class="string">'/api/first'</span>, upload.array(), (request, response) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!(request.body.url.startsWith(<span class="string">'http://'</span>) || request.body.url.startsWith(<span class="string">'https://'</span>))) &#123;</span><br><span class="line">    request.body.url = <span class="string">'http://'</span> + request.body.url;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> res1 = request.body.title;</span><br><span class="line">  <span class="keyword">const</span> res2 = request.body.url;</span><br><span class="line">  <span class="keyword">const</span> res3 = request.body.submitted;</span><br><span class="line">  <span class="keyword">const</span> res = &#123;</span><br><span class="line">    title: res1,</span><br><span class="line">    url: res2,</span><br><span class="line">    author: res3</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">  response.send(res);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>疯狂的控制台输出大法后发现, 传到客户端的应该是 <code>JSON</code> 对象而不是字符串 所以改为 <code>response.json()</code> 然后就基本达成效果。<br>大致完工。绿色的样式信息懒得写了=。=</p>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
      <a rel="prev" class="post-nav-item mdui-float-left" href="/2018/12/31/mysql%E8%BF%90%E8%A1%8C%E7%8E%B0%E6%9C%89sql%E6%96%87%E4%BB%B6/">
        <i class="iconfont icon-angle-left"></i>
        <span>mysql运行现有sql文件</span>
      </a>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/2018/12/16/nodejs-%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%A2%AB%E8%87%AA%E5%B7%B1%E8%A0%A2%E5%93%AD%E7%9A%84%E7%BB%8F%E5%8E%86/">
        <span>nodejs 记一次被自己蠢哭的经历</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/2018/12/17/ProjectASocialNewsWebPageapp/" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Project-a-social-news-web-app"><span class="toc-number">1.</span> <span class="toc-text">Project: a social news web app</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Objective"><span class="toc-number">1.1.</span> <span class="toc-text">Objective</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functional-requirements"><span class="toc-number">1.2.</span> <span class="toc-text">Functional requirements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Technical-requirements"><span class="toc-number">1.3.</span> <span class="toc-text">Technical requirements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Expected-result"><span class="toc-number">1.4.</span> <span class="toc-text">Expected result</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-将页面更改为服务端。"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.将页面更改为服务端。</span></a></li></ol></li></ol></li></ol>
      </li>
    </ul>
  </div>



  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
      <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank"></a>
      
      <span>
        &copy; 2019 - 2020
      
      <span style="color:#ffffff" class="iconfont icon-Instagram"></span>
      
        Sirine
      </span>
    </div>
    <div class="mdui-row">
      
      <div class="mdui-col-xs-6 mdui-text-right">
        <span>Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a></span>
      </div>
      <div class="mdui-col-xs-6 mdui-text-left">
        <span>Theme: <a href="https://github.com/kb1000fx/Meadow" rel="noopener" target="_blank">Meadow</a></span>
      </div>
      
    </div>
    <div class="mdui-row">
      
      <div class="mdui-col-xs-6 mdui-text-right">
        <span id="busuanzi_container_site_uv" style="display: none;"> <span
            class="iconfont icon-user"></span>总访客量 <span
            id="busuanzi_value_site_uv"></span></span>
      </div>
      <div class="mdui-col-xs-6 mdui-text-left">
        <span id="busuanzi_container_site_pv" style="display: none;"> <span
            class="iconfont icon-eye"></span>总访问量 <span
            id="busuanzi_value_site_pv"></span></span>
      </div>
      
    </div>
  </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  

    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    <script src="/js/mdui.min.v1.0.0.js"></script>


<script src="/js/meadow.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html >