<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/images/favicon-16x16.ico">
    

    
    
        <link rel="stylesheet" href="/css/mdui.min.v1.0.0.css">
    
    <link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/iconfont.css">

    
    












          


    
    
    <title>
        
            学习笔记 2020 11 11 | Drowning me
        
    </title>
    
    
</head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/" class="mdui-typo-headline">Drowning me</a>
    <a href="/" class="header-subtitle mdui-typo-headline">沉没</a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-2">
        <div class="mdui-list">
            
                
                <a href="/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">主页</div>
                </a>
            
                
                <a href="/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/categories/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-folder"></i>
                    </div>
                    <div class="mdui-list-item-content">分类</div>
                </a>
            
                
                <a href="/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
                
                <a href="/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-2">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/images/avatar.jpg"/>
                
            </div>
            <div class="sidebar-author-name">Sirine</div>
            <div class="sidebar-description"></div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="mailto:sirine@foxmail.com" target="_blank" rel="noopener" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a href="https://github.com/S1rine" target="_blank" rel="noopener" class="mdui-chip-title">GitHub</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a href="https://garybear.cn/hexo-theme-meadow/" target="_blank" rel="noopener" class="mdui-list-item mdui-ripple">
                            Meadow说明文档
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/">学习笔记 2020 11 11</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2020-11-11
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2020-11-11
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;<a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </span>
    
      <span>
        <span class="iconfont icon-eye"></span>
        阅读次数:&nbsp;
        <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
      </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=学习笔记 2020 11 11&url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/&pic=https://s1rine.github.io/images/favicon-16x16.ico&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=学习笔记 2020 11 11&url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/&via=Sirine" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/&title=学习笔记 2020 11 11" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=Drowning me&title=学习笔记 2020 11 11&summary=&pics=https://s1rine.github.io/images/favicon-16x16.ico&url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=https://s1rine.github.io/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/&text=学习笔记 2020 11 11" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/notes/ >notes</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <h1 id="学习笔记-2020-11-11"><a href="#学习笔记-2020-11-11" class="headerlink" title="学习笔记 2020-11-11"></a>学习笔记 2020-11-11</h1><a id="more"></a>

<h2 id="JavaScript-高级程序设计-第4版-阅读记录"><a href="#JavaScript-高级程序设计-第4版-阅读记录" class="headerlink" title="JavaScript 高级程序设计(第4版) 阅读记录"></a>JavaScript 高级程序设计(第4版) 阅读记录</h2><h3 id="DOM-拓展"><a href="#DOM-拓展" class="headerlink" title="DOM 拓展"></a>DOM 拓展</h3><h4 id="Selectors-API"><a href="#Selectors-API" class="headerlink" title="Selectors API"></a>Selectors API</h4><p>Selectors API 是 W3C 推荐标准，规定了浏览器原生支持的 CSS 查询API 。</p>
<p>核心是两个方法，querySelector() 和 querySelectorAll() 。在兼容浏览器中，Document 类型和 Element 类型的实例上都会暴露这两个方法。</p>
<ol>
<li><p>querySelector()</p>
<p>该方法接收 CSS 选择符参数，返回匹配该模式的第一个后代元素或 null 。</p>
</li>
<li><p>querySelectorAll()</p>
<p>该方法也接收一个用于查询的参数，但它会返回所有匹配的节点。该方法返回一个 NodeList 的静态实例。</p>
</li>
<li><p>matches()</p>
<p>该方法接收一个 CSS 选择符参数，如果元素匹配则该选择符返回 true ，否则返回 false 。</p>
</li>
</ol>
<h4 id="元素遍历"><a href="#元素遍历" class="headerlink" title="元素遍历"></a>元素遍历</h4><p>IE9 之前的版本不会把元素间的空格当成空白节点，而其他浏览器会。这样导致了 childNodes 和 firstChild 等属性上的差异。为了弥补这个差异，同时不影响 DOM 规范， W3C 通过新的 Element Traversal 规范定义了一组新属性。</p>
<ul>
<li>childElementCount，返回子元素数量 ( 不包含文本节点和注释 )；</li>
<li>firstElementChild，指向第一个 Element 类型的子元素；</li>
<li>lastElementChild；</li>
<li>previousElementSibling，指向前一个 Element 类型的同胞元素；</li>
<li>nextElementSibling；</li>
</ul>
<h4 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h4><p>HTML5 规范包含了与标记相关的大量 JavaScript API 定义。</p>
<h5 id="CSS-类拓展"><a href="#CSS-类拓展" class="headerlink" title="CSS 类拓展"></a>CSS 类拓展</h5><ol>
<li><p>getElementsByClassName()</p>
<p>该方法暴露在 document 对象和所有 HTML 元素上。返回包含相应类的元素的 NodeList 。</p>
<p>IE9 及以上版本，以及所有现代浏览器都支持该方法。</p>
</li>
<li><p>classList 属性</p>
<p>可以通过 className 属性操作类名，但该属性是一个字符串。</p>
<p>classList 是一个新的集合类型 DOMTokenList 的实例。该类型也有 length 属性表示自己包含多少项，可以通过 item() 或中括号取得个别的元素。还有一些方法：</p>
<ul>
<li>add(value)；</li>
<li>contains(value)，返回布尔值，表示给定的 value 是否存在；</li>
<li>remove(value)；</li>
<li>toggle(value)，若已存在则删除，不存在则添加。</li>
</ul>
<p>IE10 及以上版本和其他主流浏览器实现了该属性。</p>
</li>
</ol>
<h5 id="焦点管理"><a href="#焦点管理" class="headerlink" title="焦点管理"></a>焦点管理</h5><p>HTML5 添加了辅助 DOM 焦点管理的功能。</p>
<ol>
<li><p>document.activeElement</p>
<p>始终包含当前拥有焦点的 DOM 元素。</p>
<p>默认情况下，该属性会在页面刚加载完之后设置为 document.body 。在那之前，值为 null 。</p>
</li>
<li><p>document.hasFocus()</p>
<p>返回布尔值，表示文档是否拥有焦点。</p>
</li>
</ol>
<h5 id="HTMLDocument-拓展"><a href="#HTMLDocument-拓展" class="headerlink" title="HTMLDocument 拓展"></a>HTMLDocument 拓展</h5><ol>
<li><p>readyState</p>
<p>该属性最早是 IE4 添加到 document 对象上。HTML5将这个属性写入了标准。该属性有两个值：</p>
<ul>
<li>loading，表示文档正在加载；</li>
<li>complete，表示文档加载完成。</li>
</ul>
</li>
<li><p>compatMode 属性</p>
<p>自从 IE6 提供了以标准或混杂模式渲染页面的能力之后，检测页面渲染模式成为一个必要的需求。这个属性指示浏览器当前处于什么渲染模式下。</p>
<p>标准模式下，这个属性的值是 “CSS1Compat”，而在混杂模式下，值是 “BackCompat”。</p>
</li>
<li><p>head 属性</p>
<p>该属性指向文档的 <code>&lt;head&gt;</code> 属性。</p>
</li>
</ol>
<h5 id="字符集属性"><a href="#字符集属性" class="headerlink" title="字符集属性"></a>字符集属性</h5><p>characterSet 属性表示文档实际使用的字符集，也可以用来指定新字符集。</p>
<h5 id="自定义数据属性"><a href="#自定义数据属性" class="headerlink" title="自定义数据属性"></a>自定义数据属性</h5><p>浏览器允许给元素指定非标准的属性，最好以前缀 data- 来指定。</p>
<p>自定义属性可以通过元素的 dataset 属性来访问。dataset 属性是一个 DOMStringMap 的实例，包含一组键/值对映射。元素的每个 data-name 属性在 dataset 中都可以通过 data- 后面的字符串作为键来访问。</p>
<h5 id="插入标记"><a href="#插入标记" class="headerlink" title="插入标记"></a>插入标记</h5><ol>
<li><p>innerHTML</p>
<p>在读取 innerHTML 属性时，会返回元素所有后代的 HTML 字符串，包括元素、注释和文本节点。在写入时，会根据提供的字符串值以新的 DOM 子树替代元素中原来包含的所有子节点。</p>
</li>
<li><p>旧 IE中的 innerHTML</p>
<p>在所有现代浏览器中，通过 innerHTML 插入的 <code>&lt;script&gt;</code> 标签是不会执行的。而在 IE8 及之前的版本中，只要这样插入的 <code>&lt;script&gt;</code> 元素指定了 defer 属性，且 <code>&lt;script&gt;</code> 之前是 受控元素，那就是可以执行的。<code>&lt;script&gt;</code> 元素与 <code>&lt;style&gt;</code> 或注释一样，都是非受控元素，也就是在页面上看不到它们。IE 会把 innerHTML 中从非受控元素开始的内容都删掉。</p>
</li>
<li><p>outerHTML 属性</p>
<p>读取 outerHTML 属性时，会返回调用它的元素及所有后代元素的 HTML 字符串。在写入 outerHTML 属性时，调用它的元素会被传入的 HTML 字符串经解释之后生成的 DOM 子树取代。</p>
</li>
<li><p>insertAdjacentHTML() 与 insertAdjacentText()</p>
<p>这两个方法最早源自 IE ，接收两个参数，要插入标记的位置和要插入的 HTML 或文本。</p>
<p>第一个参数必须是下列值的一个：</p>
<ul>
<li>beforebegin，插入当前元素前面，作为前一个同胞节点；</li>
<li>afterbegin，插入当前元素内部，作为新的子节点或放在第一个子节点后面；</li>
<li>beforeend，插入当前元素内部，作为新的子节点或放在最后一个子节点后面；</li>
<li>afterend，插入当前元素后面；</li>
</ul>
<p>以上值不区分大小写。</p>
</li>
</ol>
<h2 id="现代-JavaScript-教程"><a href="#现代-JavaScript-教程" class="headerlink" title="现代 JavaScript 教程"></a>现代 JavaScript 教程</h2><h3 id="JSON方法，toJSON"><a href="#JSON方法，toJSON" class="headerlink" title="JSON方法，toJSON"></a>JSON方法，toJSON</h3><h4 id="排除和转换：replacer"><a href="#排除和转换：replacer" class="headerlink" title="排除和转换：replacer"></a>排除和转换：replacer</h4><p>JSON.stringify 的完整语法是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = <span class="built_in">JSON</span>.stringify(value, replacer?, space?);</span><br></pre></td></tr></table></figure>

<ul>
<li>value，要编码的值。</li>
<li>replacer，要编码的属性数组或映射函数 <code>function(key, value)</code> 。</li>
<li>space，用于格式化的空格数量。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> room = &#123;</span><br><span class="line">  number: <span class="number">23</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> meetup = &#123;</span><br><span class="line">  title: <span class="string">'Conference'</span>,</span><br><span class="line">  participants: [&#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'Alice'</span> &#125;],</span><br><span class="line">  place: room <span class="comment">// meetup 引用了 room</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">room.occupiedBy = meetup; <span class="comment">// room 引用了 meetup</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(meetup, [<span class="string">'title'</span>, <span class="string">'participants'</span>]));</span><br><span class="line"><span class="comment">// &#123;"title":"Conference","participants":[&#123;&#125;,&#123;&#125;]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> room = &#123;</span><br><span class="line">  number: <span class="number">23</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> meetup = &#123;</span><br><span class="line">  title: <span class="string">'Conference'</span>,</span><br><span class="line">  participants: [&#123; <span class="attr">name</span>: <span class="string">'John'</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'Alice'</span> &#125;],</span><br><span class="line">  place: room <span class="comment">// meetup 引用了 room</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">room.occupiedBy = meetup; <span class="comment">// room 引用了 meetup</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  <span class="built_in">JSON</span>.stringify(meetup, <span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> key == <span class="string">'occupiedBy'</span> ? <span class="literal">undefined</span> : value;</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* key:value pairs that come to replacer:</span></span><br><span class="line"><span class="comment">:             [object Object]</span></span><br><span class="line"><span class="comment">title:        Conference</span></span><br><span class="line"><span class="comment">participants: [object Object],[object Object]</span></span><br><span class="line"><span class="comment">0:            [object Object]</span></span><br><span class="line"><span class="comment">name:         John</span></span><br><span class="line"><span class="comment">1:            [object Object]</span></span><br><span class="line"><span class="comment">name:         Alice</span></span><br><span class="line"><span class="comment">place:        [object Object]</span></span><br><span class="line"><span class="comment">number:       23</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="格式化：space"><a href="#格式化：space" class="headerlink" title="格式化：space"></a>格式化：space</h4><p>第三个参数用于优化格式的空格数量。</p>
<h4 id="自定义-“toJSON”"><a href="#自定义-“toJSON”" class="headerlink" title="自定义 “toJSON”"></a>自定义 “toJSON”</h4><p>可以给对象自定义 toJSON 方法来自定义 JSON 转换。</p>
<h4 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse"></a>JSON.parse</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value = <span class="built_in">JSON</span>.parse(str, reviver?);</span><br></pre></td></tr></table></figure>

<ul>
<li>str，要解析的 JSON 字符串。</li>
<li>reviver，可选的函数 <code>function(key, value)</code> ，该函数将为每个键值对调用。</li>
</ul>
<p>例子，JSON 对象中的日期值 parse 之后依然是一个字符串，可以提供 reviver 函数来进行转换。</p>
<h4 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h4><ol>
<li><p>将对象转换为 JSON，然后再转换回来</p>
<p>将 <code>user</code> 转换为 JSON，然后将其转换回到另一个变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;</span><br><span class="line">  name: <span class="string">"John Smith"</span>,</span><br><span class="line">  age: <span class="number">35</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="built_in">JSON</span>.stringify(user);</span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">JSON</span>.parse(str);</span><br></pre></td></tr></table></figure>
</li>
<li><p>排除反向引用</p>
<p>在简单循环引用的情况下，我们可以通过名称排除序列化中违规的属性。</p>
<p>但是，有时我们不能只使用名称，因为它既可能在循环引用中也可能在常规属性中使用。因此，我们可以通过属性值来检查属性。</p>
<p>编写 <code>replacer</code> 函数，移除引用 <code>meetup</code> 的属性，并将其他所有属性序列化：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> room = &#123;</span><br><span class="line">  number: <span class="number">23</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> meetup = &#123;</span><br><span class="line">  title: <span class="string">"Conference"</span>,</span><br><span class="line">  occupiedBy: [&#123;<span class="attr">name</span>: <span class="string">"John"</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">"Alice"</span>&#125;],</span><br><span class="line">  place: room</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环引用</span></span><br><span class="line">room.occupiedBy = meetup;</span><br><span class="line">meetup.self = meetup;</span><br><span class="line"></span><br><span class="line">alert( <span class="built_in">JSON</span>.stringify(meetup, <span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* your code */</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 结果应该是：</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  "title":"Conference",</span></span><br><span class="line"><span class="comment">  "occupiedBy":[&#123;"name":"John"&#125;,&#123;"name":"Alice"&#125;],</span></span><br><span class="line"><span class="comment">  "place":&#123;"number":23&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">  <span class="built_in">JSON</span>.stringify(meetup, <span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value === meetup &amp;&amp; key !== <span class="string">''</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</li>
</ol>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/2020/11/10/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-10/">
        <span>学习笔记 2020 11 10</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/2020/11/11/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2020-11-11/" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#学习笔记-2020-11-11"><span class="toc-number">1.</span> <span class="toc-text">学习笔记 2020-11-11</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript-高级程序设计-第4版-阅读记录"><span class="toc-number">1.1.</span> <span class="toc-text">JavaScript 高级程序设计(第4版) 阅读记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM-拓展"><span class="toc-number">1.1.1.</span> <span class="toc-text">DOM 拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Selectors-API"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">Selectors API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#元素遍历"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">元素遍历</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTML5"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">HTML5</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#CSS-类拓展"><span class="toc-number">1.1.1.3.1.</span> <span class="toc-text">CSS 类拓展</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#焦点管理"><span class="toc-number">1.1.1.3.2.</span> <span class="toc-text">焦点管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTMLDocument-拓展"><span class="toc-number">1.1.1.3.3.</span> <span class="toc-text">HTMLDocument 拓展</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#字符集属性"><span class="toc-number">1.1.1.3.4.</span> <span class="toc-text">字符集属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#自定义数据属性"><span class="toc-number">1.1.1.3.5.</span> <span class="toc-text">自定义数据属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#插入标记"><span class="toc-number">1.1.1.3.6.</span> <span class="toc-text">插入标记</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#现代-JavaScript-教程"><span class="toc-number">1.2.</span> <span class="toc-text">现代 JavaScript 教程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON方法，toJSON"><span class="toc-number">1.2.1.</span> <span class="toc-text">JSON方法，toJSON</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#排除和转换：replacer"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">排除和转换：replacer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化：space"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">格式化：space</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义-“toJSON”"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">自定义 “toJSON”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSON-parse"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">JSON.parse</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#任务"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">任务</span></a></li></ol></li></ol></li></ol></li></ol>
      </li>
    </ul>
  </div>



  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
      <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank"></a>
      
      <span>
        &copy; 2019 - 2020
      
      <span style="color:#ffffff" class="iconfont icon-Instagram"></span>
      
        Sirine
      </span>
    </div>
    <div class="mdui-row">
      
      <div class="mdui-col-xs-6 mdui-text-right">
        <span>Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a></span>
      </div>
      <div class="mdui-col-xs-6 mdui-text-left">
        <span>Theme: <a href="https://github.com/kb1000fx/Meadow" rel="noopener" target="_blank">Meadow</a></span>
      </div>
      
    </div>
    <div class="mdui-row">
      
      <div class="mdui-col-xs-6 mdui-text-right">
        <span id="busuanzi_container_site_uv" style="display: none;"> <span
            class="iconfont icon-user"></span>总访客量 <span
            id="busuanzi_value_site_uv"></span></span>
      </div>
      <div class="mdui-col-xs-6 mdui-text-left">
        <span id="busuanzi_container_site_pv" style="display: none;"> <span
            class="iconfont icon-eye"></span>总访问量 <span
            id="busuanzi_value_site_pv"></span></span>
      </div>
      
    </div>
  </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  

    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    <script src="/js/mdui.min.v1.0.0.js"></script>


<script src="/js/meadow.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html >